(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[898],{1544:(e,a,t)=>{Promise.resolve().then(t.bind(t,6356))},4234:(e,a,t)=>{"use strict";t.d(a,{i:()=>f});var l=t(8045),s=t(5177),r=t(2989),i=t(6389),n=t(251),o=t(4104),c=t(1977),d=t(9062);let x=s.createContext(null);function m(){let e=s.useContext(x);if(!e)throw Error("useCarousel must be used within a <Carousel />");return e}function u(e){let{orientation:a="horizontal",opts:t,setApi:r,plugins:o,className:c,children:d,...m}=e,[u,h]=(0,n.A)({...t,axis:"horizontal"===a?"x":"y"},o),[g,p]=s.useState(!1),[b,f]=s.useState(!1),v=s.useCallback(e=>{e&&(p(e.canScrollPrev()),f(e.canScrollNext()))},[]),j=s.useCallback(()=>{null==h||h.scrollPrev()},[h]),N=s.useCallback(()=>{null==h||h.scrollNext()},[h]),w=s.useCallback(e=>{"ArrowLeft"===e.key?(e.preventDefault(),j()):"ArrowRight"===e.key&&(e.preventDefault(),N())},[j,N]);return s.useEffect(()=>{h&&r&&r(h)},[h,r]),s.useEffect(()=>{if(h)return v(h),h.on("reInit",v),h.on("select",v),()=>{null==h||h.off("select",v)}},[h,v]),(0,l.jsx)(x.Provider,{value:{carouselRef:u,api:h,opts:t,orientation:a||((null==t?void 0:t.axis)==="y"?"vertical":"horizontal"),scrollPrev:j,scrollNext:N,canScrollPrev:g,canScrollNext:b},children:(0,l.jsx)("div",{onKeyDownCapture:w,className:(0,i.cn)("relative",c),role:"region","aria-roledescription":"carousel","data-slot":"carousel",...m,children:d})})}function h(e){let{className:a,...t}=e,{carouselRef:s,orientation:r}=m();return(0,l.jsx)("div",{ref:s,className:"overflow-hidden","data-slot":"carousel-content",children:(0,l.jsx)("div",{className:(0,i.cn)("flex","horizontal"===r?"-ml-4":"-mt-4 flex-col",a),...t})})}function g(e){let{className:a,...t}=e,{orientation:s}=m();return(0,l.jsx)("div",{role:"group","aria-roledescription":"slide","data-slot":"carousel-item",className:(0,i.cn)("min-w-0 shrink-0 grow-0 basis-full","horizontal"===s?"pl-4":"pt-4",a),...t})}function p(e){let{className:a,variant:t="outline",size:s="icon",...r}=e,{orientation:n,scrollPrev:c,canScrollPrev:x}=m();return(0,l.jsxs)(d.$,{"data-slot":"carousel-previous",variant:t,size:s,className:(0,i.cn)("absolute size-8 rounded-full","horizontal"===n?"top-1/2 -left-12 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",a),disabled:!x,onClick:c,...r,children:[(0,l.jsx)(o.A,{}),(0,l.jsx)("span",{className:"sr-only",children:"Previous slide"})]})}function b(e){let{className:a,variant:t="outline",size:s="icon",...r}=e,{orientation:n,scrollNext:o,canScrollNext:x}=m();return(0,l.jsxs)(d.$,{"data-slot":"carousel-next",variant:t,size:s,className:(0,i.cn)("absolute size-8 rounded-full","horizontal"===n?"top-1/2 -right-12 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",a),disabled:!x,onClick:o,...r,children:[(0,l.jsx)(c.A,{}),(0,l.jsx)("span",{className:"sr-only",children:"Next slide"})]})}function f(e){let{images:a,className:t,onCurrentChange:n}=e,[o,c]=(0,s.useState)(),[d,x]=(0,s.useState)(0),[m,f]=(0,s.useState)(0),v=(0,s.useCallback)(()=>{if(!o)return;let e=o.selectedScrollSnap();x(e),null==n||n(e)},[o,n]);return(0,s.useEffect)(()=>{if(o)return o.on("select",v),f(o.scrollSnapList().length),v(),()=>{o.off("select",v)}},[o,a,v]),(0,l.jsx)("div",{className:(0,i.cn)("relative flex items-center justify-center",t),children:(0,l.jsxs)(u,{setApi:c,opts:{loop:!0},className:"w-full h-full h-full-carousel",children:[(0,l.jsx)(h,{className:"h-full",children:a.map(e=>(0,l.jsx)(g,{className:"h-full",children:(0,l.jsx)("div",{className:"p-1 h-full",children:(0,l.jsx)("div",{className:"relative h-full",children:(0,l.jsx)(r.default,{src:e.src,alt:e.alt||"Image ".concat(e.id),fill:!0,className:"h-full object-contain rounded-lg"})})})},e.id))}),a.length>1&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p,{className:"absolute left-4 top-1/2 -translate-y-1/2 bg-black/50 p-2 rounded-full bg-primary hover:bg-primary/90 hover:text-white border-none text-white h-10 w-10"}),(0,l.jsx)(b,{className:"absolute right-4 top-1/2 -translate-y-1/2 bg-black/50 p-2 rounded-full bg-primary hover:bg-primary/90 hover:text-white border-none text-white h-10 w-10"})]}),a.length>1&&(0,l.jsx)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2",children:Array.from({length:m}).map((e,a)=>(0,l.jsx)("button",{onClick:()=>null==o?void 0:o.scrollTo(a),className:(0,i.cn)("w-2 h-2 rounded-full bg-white/30 transition-colors",d===a?"bg-white":"hover:bg-white/50")},a))})]})})}},4360:(e,a,t)=>{"use strict";t.d(a,{T:()=>r});var l=t(8045);t(5177);var s=t(6389);function r(e){let{className:a,...t}=e;return(0,l.jsx)("textarea",{"data-slot":"textarea",className:(0,s.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...t})}},6356:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>M});var l=t(8045),s=t(5177),r=t(7694),i=t(8247),n=t(2065),o=t(6243),c=t(6445),d=t(1574),x=t(6686),m=t(8365),u=t(6389),h=t(2989),g=t(4360),p=t(9062),b=t(4234),f=t(8225),v=t(2590),j=t(8227);function N(e){let{...a}=e;return(0,l.jsx)(v.bL,{"data-slot":"dialog",...a})}function w(e){let{...a}=e;return(0,l.jsx)(v.l9,{"data-slot":"dialog-trigger",...a})}function y(e){let{...a}=e;return(0,l.jsx)(v.ZL,{"data-slot":"dialog-portal",...a})}function k(e){let{className:a,...t}=e;return(0,l.jsx)(v.hJ,{"data-slot":"dialog-overlay",className:(0,u.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...t})}function C(e){let{className:a,children:t,showCloseButton:s=!0,...r}=e;return(0,l.jsxs)(y,{"data-slot":"dialog-portal",children:[(0,l.jsx)(k,{}),(0,l.jsxs)(v.UC,{"data-slot":"dialog-content",className:(0,u.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...r,children:[t,s&&(0,l.jsxs)(v.bm,{"data-slot":"dialog-close",className:"text-white ring-offset-background data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,l.jsx)(j.A,{}),(0,l.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function z(e){let{className:a,...t}=e;return(0,l.jsx)("div",{"data-slot":"dialog-header",className:(0,u.cn)("flex flex-col gap-2 text-center sm:text-left",a),...t})}function S(e){let{className:a,...t}=e;return(0,l.jsx)(v.hE,{"data-slot":"dialog-title",className:(0,u.cn)("text-lg leading-none font-semibold",a),...t})}function A(e){let{open:a,onOpenChange:t,trigger:s,title:r="请选择",className:i="",contentClassName:n="",headerClassName:o="",size:c="md",width:d,maxWidth:x,height:m,maxHeight:h,children:g}=e,p={};d?(p.width=d,p.maxWidth="none"):x?p.maxWidth=x:"full"===c?(p.width="100%",p.maxWidth="95vw"):"auto"!==c&&(p.maxWidth=({sm:"384px",md:"448px",lg:"512px",xl:"576px",full:"95vw",auto:"none"})[c]),m&&(p.height=m),h&&(p.maxHeight=h);let b=(0,u.cn)(n);return(0,l.jsx)("div",{className:i,children:(0,l.jsxs)(N,{open:a,onOpenChange:t,children:[s&&(0,l.jsx)(w,{asChild:!0,children:s}),(0,l.jsxs)(C,{className:"".concat(b," bg-[#2a2a2e] border-none"),style:p,children:[r&&(0,l.jsx)(z,{className:o,children:(0,l.jsx)(S,{className:"text-white",children:r})}),(0,l.jsx)("div",{className:"mt-4",children:g})]})]})})}var F=t(3677),E=t(7803),$=t(7148);let _={"1:1":"1328*1328","16:9":"1664*928","3:2":"1472*1140","2:3":"1140*1472","3:4":"1140*1472","4:3":"1472*1140","9:16":"928*1664"},D=[{value:"qwen-image",label:"通义千问-Image",description:"通义千问-Image-Edit",icon:"/image/Group.svg"},{value:"wan2.2-t2i-flash",label:"Wan2.2-Flash",description:"通义万相文生图2.2",icon:"/image/Group.svg"},{value:"wan2.2-t2i-plus",label:"Wan2.2-Plus",description:"通义万相文生图2.2",icon:"/image/Group.svg"},{value:"Hunyuan",label:"Hunyuan",description:"腾讯混元大模型",icon:"/image/com-logo-hunyuan.svg"}],W=[{label:"自动",preview:"/image/style1.jpg"},{label:"吉卜力",preview:"/image/style2.jpg"},{label:"超现实主义",preview:"/image/style3.jpg"},{label:"蒸汽朋克",preview:"/image/style4.jpg"},{label:"日本动漫",preview:"/image/style5.jpg"},{value:"6",label:"像素艺术",preview:"/image/style6.jpg"},{label:"黑色电影",preview:"/image/style7.jpg"},{label:"现代摄影",preview:"/image/style8.jpg"}],I=[{id:1,src:"/image/demo1.jpeg"},{id:2,src:"/image/demo2.jpeg"},{id:3,src:"/image/demo3.jpeg"}],P=[{label:"高层探险家",prompt:"上图是城市探险者，下图是城市灯光和快速流动的河流。眩晕与平静交织。"},{label:"公园生活",prompt:"一个阳光明媚的下午，人们在公园里散步，孩子们在草地上嬉戏，远处是城市的轮廓。"},{label:"海边的宁静",prompt:"夕阳西下，金色的余晖洒在平静的海面上，一艘小船静静地停泊在岸边。"},{label:"晨露",prompt:"清晨，阳光穿过树叶，照在挂着露珠的蜘蛛网上，晶莹剔剔透。"},{label:"未来城市",prompt:"霓虹灯闪烁的未来城市，飞行汽车穿梭在高楼大厦之间，街道上是熙熙攘攘的人群。"},{label:"林中小屋",prompt:"一座被绿树环绕的小木屋，屋顶上覆盖着青苔，烟囱里冒出袅袅炊烟。"},{label:"星空下的山脉",prompt:"雄伟的山脉剪影之上是璀璨的银河，流星划过夜空。"},{label:"蒸汽火车",prompt:"一列老式蒸汽火车喷着白烟，行驶在蜿蜒的山间铁轨上，穿过一片金色的麦田。"},{label:"古老图书馆",prompt:"一个宏伟的图书馆，高高的书架上摆满了古老的书籍，阳光从彩绘玻璃窗透进来，照亮了空气中的尘埃。"},{label:"未来交通",prompt:"悬浮在空中的透明管道里，高速胶囊列车飞速穿行，连接着云端城市。"}],L=e=>[...P].sort(()=>.5-Math.random()).slice(0,e);function M(){let[e,a]=(0,s.useState)(""),[t,v]=(0,s.useState)("wan2.2-t2i-flash"),[j,N]=(0,s.useState)([]),[w,y]=(0,s.useState)("自动"),[k,C]=(0,s.useState)("1:1"),[z,S]=(0,s.useState)(1),[P,M]=(0,s.useState)(!1),[O,T]=(0,s.useState)(!1),[G,H]=(0,s.useState)(I),[q,R]=(0,s.useState)(null),[J,K]=(0,s.useState)(0),{formattedDuration:U,start:V,stop:Z}=(0,$.g)();(0,s.useEffect)(()=>{N(L(4))},[]);let B=W.find(e=>e.label===w),Q=async()=>{if(0===G.length)return;let e=G[J];if(e)try{R(null),await (0,F.Rb)(e.src,"ai-image-".concat(e.id,"-").concat(Date.now(),".jpg"))}catch(a){let e=a instanceof Error?a.message:"下载失败";R("下载失败: ".concat(e))}},X=async()=>{let a=(()=>{let a=e.trim();return a?a.length>2e3?"提示词长度不能超过2000个字符":t?z<1||z>4?"输出数量必须在1-4之间":null:"请选择模型":"请输入提示词"})();if(a)return void R(a);let l=D.find(e=>e.value===t);if(!l)return void R("模型配置错误");T(!0),V(),R(null);try{let a=e.trim();w&&"自动"!==w&&(a+=" 注意：图片的风格为【".concat(w,"】"));let t=await (0,E.Fz)({model:l.value,prompt:a,sieze:_[k],outputCount:z});t.success&&t.data?(H(t.data),K(0)):R(t.error||"生成图像失败")}catch(e){R(e instanceof Error?e.message:"生成图像时发生未知错误")}finally{T(!1),Z()}};return(0,l.jsxs)("div",{className:"bg-[#0D0D12] min-h-screen text-white",children:[(0,l.jsx)(r.A,{}),(0,l.jsx)(i.A,{}),(0,l.jsx)("main",{className:"ml-20 pt-14",children:(0,l.jsxs)("div",{className:"flex h-[calc(100vh-56px)] p-4 gap-4",children:[(0,l.jsxs)("div",{className:"w-[380px] bg-[#24222D] p-4 flex flex-col",children:[(0,l.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-4",children:[(0,l.jsx)("h1",{className:"text-xl",children:"文本转图像AI"}),(0,l.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"模型"}),(0,l.jsx)(f.t,{options:D,value:t,onValueChange:v,variant:"dark",size:"lg",renderTrigger:e=>e?(0,l.jsxs)("div",{className:"flex items-center gap-3 py-1",children:[(0,l.jsx)("div",{className:"w-10 h-10 rounded-lg bg-gray-700 flex items-center justify-center",children:(0,l.jsx)(h.default,{src:e.icon,alt:e.label,unoptimized:!0,width:24,height:24})}),(0,l.jsxs)("div",{className:"text-left",children:[(0,l.jsx)("p",{className:"text-sm text-white",children:e.label}),(0,l.jsx)("p",{className:"text-xs text-gray-400",children:e.description})]})]}):null,renderItem:e=>(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"w-8 h-8 rounded-md bg-gray-700 flex items-center justify-center",children:(0,l.jsx)(h.default,{src:e.icon,alt:e.label,unoptimized:!0,width:24,height:24})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-white",children:e.label}),(0,l.jsx)("p",{className:"text-xs text-gray-400",children:e.description})]})]})}),(0,l.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"提示词"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(g.T,{value:e,onChange:e=>a(e.target.value),placeholder:"你想要生成什么？",className:"h-32 bg-[#383842] !text-xs resize-none border-none focus-visible:ring-0"}),(0,l.jsxs)("div",{className:"absolute bottom-2 right-2 text-xs text-gray-500",children:[e.length,"/",2e3]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-400 mt-2",children:[(0,l.jsx)("span",{children:"例子:"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:j.map(e=>(0,l.jsx)(p.$,{onClick:()=>a(e.prompt),variant:"ghost",className:"h-auto p-0 text-xs text-gray-400 hover:text-[#FF3466] hover:bg-transparent",children:e.label},e.label))}),(0,l.jsx)(p.$,{onClick:()=>{N(L(4))},variant:"ghost",size:"icon",className:"ml-auto h-6 w-6 text-gray-400 hover:text-[#FF3466]",children:(0,l.jsx)(n.A,{className:"w-4 h-4"})})]}),(0,l.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"风格"}),(0,l.jsxs)(p.$,{variant:"outline",className:"w-full justify-between bg-[#383842] border-[#4a4a54] hover:bg-[#4a4a54] h-auto",onClick:()=>M(!0),children:[B?(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"w-10 h-10 bg-gray-700",children:(0,l.jsx)(h.default,{src:B.preview,alt:B.label,width:40,height:40,className:"w-full h-full object-cover",unoptimized:!0})}),(0,l.jsx)("span",{className:"text-sm text-white",children:B.label})]}):(0,l.jsx)("span",{className:"text-gray-400 text-sm py-2",children:"请选择风格"}),(0,l.jsx)(o.A,{className:"w-4 h-4 text-gray-400"})]}),(0,l.jsx)(A,{open:P,onOpenChange:M,title:"选择风格",maxWidth:"60vw",children:(0,l.jsx)("div",{className:"grid grid-cols-4 gap-3",children:W.map(e=>(0,l.jsxs)("div",{className:(0,u.cn)("rounded-lg cursor-pointer bg-[#383842] hover:bg-[#4a4a54]",e.label===w&&"ring-2 ring-[#FF3466]"),onClick:()=>{y(e.label),M(!1)},children:[(0,l.jsx)("div",{className:"aspect-square",children:(0,l.jsx)(h.default,{src:e.preview,alt:e.label,width:120,height:120,className:"w-full h-full object-cover rounded-t-lg",unoptimized:!0})}),(0,l.jsx)("p",{className:"p-2 text-sm text-white text-center",children:e.label})]},e.label))})}),(0,l.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"长宽比"}),(0,l.jsx)("div",{className:"grid grid-cols-7 gap-2",children:["1:1","16:9","3:2","2:3","3:4","4:3","9:16"].map(e=>(0,l.jsxs)(p.$,{variant:"outline",onClick:()=>C(e),className:(0,u.cn)("h-16 flex-col bg-[#383842] border-[#4a4a54] hover:bg-[#4a4a54] hover:text-white",k===e&&"border-primary"),children:[(0,l.jsx)("div",{className:"bg-primary",style:(e=>{let[a,t]=e.split(":").map(Number),l=Math.min(24/a,24/t);return{width:Math.max(a*l,8),height:Math.max(t*l,8)}})(e)}),(0,l.jsx)("span",{className:"text-xs",children:e})]},e))}),(0,l.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"输出图像数量"}),(0,l.jsx)("div",{className:"grid grid-cols-4 gap-2",children:[1,2,3,4].map(e=>(0,l.jsx)(p.$,{variant:z===e?"default":"outline",onClick:()=>S(e),className:z===e?"bg-primary hover:bg-primary/90":"bg-[#383842] border-[#4a4a54] hover:bg-[#4a4a54] hover:text-white",children:e},e))}),(0,l.jsxs)("div",{className:"flex justify-between text-sm text-gray-400",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("span",{children:"所需额度:"}),(0,l.jsx)(c.A,{className:"w-4 h-4"})]}),(0,l.jsxs)("span",{className:"text-white",children:[10*z," 额度"]})]})]}),q&&(0,l.jsxs)("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 flex items-start gap-2",children:[(0,l.jsx)(d.A,{className:"w-4 h-4 text-red-400 mt-0.5 flex-shrink-0"}),(0,l.jsx)("div",{className:"text-sm text-red-400",children:q})]}),(0,l.jsx)("div",{className:"pt-4 border-t border-gray-700",children:(0,l.jsxs)(p.$,{onClick:X,disabled:0===e.length||O,className:"w-full h-12 bg-primary hover:bg-primary/90 text-lg",children:[(0,l.jsx)(x.A,{className:(0,u.cn)("w-5 h-5 mr-2",O&&"animate-spin")}),O?"生成中... ".concat(U):"生成"]})})]}),(0,l.jsxs)("div",{className:"flex flex-col flex-1 bg-[#24222D] p-4",children:[(0,l.jsx)("div",{className:"flex justify-end mb-2",children:(0,l.jsxs)(p.$,{disabled:O,size:"sm",variant:"outline",onClick:Q,className:(0,u.cn)("text-xs","bg-[#383842] border-[#4a4a54] text-white","hover:bg-[#FF3466] hover:border-[#FF3466] hover:text-white"),children:[(0,l.jsx)(m.A,{className:"w-4 h-4"}),"下载当前图片"]})}),(0,l.jsx)(b.i,{images:G,className:"flex-1",onCurrentChange:e=>{K(e)}})]})]})})]})}}},e=>{e.O(0,[174,801,560,820,110,986,143,358],()=>e(e.s=1544)),_N_E=e.O()}]);