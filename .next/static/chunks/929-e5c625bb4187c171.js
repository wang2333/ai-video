"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[929],{4310:(e,t,r)=>{r.d(t,{s:()=>f});var s=r(8045),l=r(5177),a=r(9026),n=r(6243),i=r(6389),c=r(9062),o=r(1915),d=r(9321),u=r(5376),h=r(6174),m=r(3816),x=r(8420);function v(e){let{video:t,className:r,autoPlay:a=!1,loop:n=!0,controls:v=!0,onEnded:f}=e,g=(0,l.useRef)(null),[b,j]=(0,l.useState)(!1),[p,w]=(0,l.useState)(!0),[N,y]=(0,l.useState)(0),[k,E]=(0,l.useState)(0),[L,C]=(0,l.useState)(!0),[S,T]=(0,l.useState)(!0),[z,A]=(0,l.useState)(!1),M=(0,l.useRef)(null);(0,l.useEffect)(()=>{let e=g.current;if(!e)return;let t=()=>{E(e.duration),T(!1)},r=()=>{y(e.currentTime)},s=()=>{j(!0)},l=()=>{j(!1)},n=()=>{j(!1),y(0),null==f||f()},i=()=>{A(!0),T(!1)},c=()=>{T(!1),A(!1),a&&!b&&e.play().then(()=>{j(!0)}).catch(e=>{console.warn("自动播放失败:",e),j(!1)})};return e.addEventListener("loadedmetadata",t),e.addEventListener("timeupdate",r),e.addEventListener("play",s),e.addEventListener("pause",l),e.addEventListener("ended",n),e.addEventListener("error",i),e.addEventListener("canplay",c),()=>{e.removeEventListener("loadedmetadata",t),e.removeEventListener("timeupdate",r),e.removeEventListener("play",s),e.removeEventListener("pause",l),e.removeEventListener("ended",n),e.removeEventListener("error",i),e.removeEventListener("canplay",c)}},[f,a,b]),(0,l.useEffect)(()=>{if(v)return M.current&&clearTimeout(M.current),C(!0),b&&(M.current=setTimeout(()=>{C(!1)},3e3)),()=>{M.current&&clearTimeout(M.current)}},[b,v]),(0,l.useEffect)(()=>{j(!1),y(0),E(0),T(!0),A(!1);let e=g.current;e&&(e.currentTime=0,e.muted=p)},[t.src,p]);let $=()=>{let e=g.current;e&&(b?e.pause():e.play().catch(console.error))},_=e=>{let t=Math.floor(e/60),r=Math.floor(e%60);return"".concat(t,":").concat(r.toString().padStart(2,"0"))},F=k>0?N/k*100:0;return(0,s.jsxs)("div",{className:(0,i.cn)("relative bg-black rounded-lg overflow-hidden group w-full h-full",r),onMouseMove:()=>{v&&M.current&&(clearTimeout(M.current),C(!0),b&&(M.current=setTimeout(()=>{C(!1)},3e3)))},children:[(0,s.jsx)("video",{ref:g,src:t.src,className:"w-full h-full object-contain",autoPlay:a,loop:n,muted:p,playsInline:!0,style:{maxWidth:"100%",maxHeight:"100%",width:"100%",height:"100%"}}),S&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50",children:(0,s.jsx)("div",{className:"w-8 h-8 border-2 border-white border-t-transparent rounded-full animate-spin"})}),z&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/70",children:(0,s.jsxs)("div",{className:"text-center text-white",children:[(0,s.jsx)("div",{className:"text-lg mb-2",children:"视频加载失败"}),(0,s.jsx)(c.$,{variant:"outline",size:"sm",onClick:()=>{var e;A(!1),T(!0),null==(e=g.current)||e.load()},children:"重试"})]})}),!S&&!z&&!b&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsx)(c.$,{variant:"ghost",size:"icon",onClick:$,className:"w-16 h-16 bg-black/50 hover:bg-black/70 text-white rounded-full",children:(0,s.jsx)(o.A,{className:"w-8 h-8 ml-1"})})}),v&&!S&&!z&&(0,s.jsxs)("div",{className:(0,i.cn)("absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4 transition-opacity duration-300",L?"opacity-100":"opacity-0 group-hover:opacity-100"),children:[(0,s.jsx)("div",{className:"w-full h-1 bg-white/30 rounded-full cursor-pointer mb-3",onClick:e=>{let t=g.current;if(!t||!k)return;let r=e.currentTarget.getBoundingClientRect(),s=(e.clientX-r.left)/r.width*k;t.currentTime=s,y(s)},children:(0,s.jsx)("div",{className:"h-full bg-primary rounded-full transition-all duration-150",style:{width:"".concat(F,"%")}})}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c.$,{variant:"ghost",size:"icon",onClick:$,className:"text-white hover:bg-white/20",children:b?(0,s.jsx)(d.A,{className:"w-5 h-5"}):(0,s.jsx)(o.A,{className:"w-5 h-5"})}),(0,s.jsx)(c.$,{variant:"ghost",size:"icon",onClick:()=>{let e=g.current;e&&(e.currentTime=0,y(0),b||e.play().catch(console.error))},className:"text-white hover:bg-white/20",children:(0,s.jsx)(u.A,{className:"w-4 h-4"})}),(0,s.jsx)(c.$,{variant:"ghost",size:"icon",onClick:()=>{let e=g.current;if(!e)return;let t=!p;e.muted=t,w(t)},className:"text-white hover:bg-white/20",children:p?(0,s.jsx)(h.A,{className:"w-5 h-5"}):(0,s.jsx)(m.A,{className:"w-5 h-5"})}),(0,s.jsxs)("span",{className:"text-white text-sm",children:[_(N)," / ",_(k)]})]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)(c.$,{variant:"ghost",size:"icon",onClick:()=>{if(document.fullscreenElement)document.exitFullscreen().catch(console.error);else{var e;null==(e=g.current)||e.requestFullscreen().catch(console.error)}},className:"text-white hover:bg-white/20",children:(0,s.jsx)(x.A,{className:"w-5 h-5"})})})]})]})]})}function f(e){let{videos:t,className:r,onCurrentChange:o,autoPlay:d=!1,showThumbnails:u=!0}=e,[h,m]=(0,l.useState)(0);(0,l.useEffect)(()=>{null==o||o(h)},[h,o]);let x=e=>{m(e)};if(0===t.length)return(0,s.jsx)("div",{className:(0,i.cn)("flex items-center justify-center bg-gray-900 rounded-lg",r),children:(0,s.jsxs)("div",{className:"text-center text-gray-400 space-y-4",children:[(0,s.jsx)("div",{className:"w-24 h-24 bg-gray-700 rounded-lg flex items-center justify-center mx-auto",children:(0,s.jsx)("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1.01M15 10h1.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,s.jsx)("p",{className:"text-sm",children:"暂无视频"})]})});let f=t[h];return(0,s.jsxs)("div",{className:(0,i.cn)("flex flex-col space-y-4 h-full",r),children:[(0,s.jsxs)("div",{className:"relative flex-1 min-h-0",children:[(0,s.jsx)(v,{video:f,className:"w-full h-full max-h-full",autoPlay:d,controls:!0}),t.length>1&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.$,{variant:"ghost",size:"icon",onClick:()=>{m(e=>e>0?e-1:t.length-1)},className:"absolute left-2 top-1/2 -translate-y-1/2 w-10 h-10 bg-black/50 hover:bg-black/70 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:(0,s.jsx)(a.A,{className:"w-5 h-5"})}),(0,s.jsx)(c.$,{variant:"ghost",size:"icon",onClick:()=>{m(e=>e<t.length-1?e+1:0)},className:"absolute right-2 top-1/2 -translate-y-1/2 w-10 h-10 bg-black/50 hover:bg-black/70 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:(0,s.jsx)(n.A,{className:"w-5 h-5"})})]}),t.length>1&&(0,s.jsxs)("div",{className:"absolute top-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded",children:[h+1," / ",t.length]})]}),u&&t.length>1&&(0,s.jsx)("div",{className:"flex gap-2 justify-center overflow-x-auto pb-2",children:t.map((e,t)=>(0,s.jsx)("button",{onClick:()=>x(t),className:(0,i.cn)("flex-shrink-0 w-20 h-12 bg-gray-800 rounded border-2 overflow-hidden transition-all",h===t?"border-primary scale-105":"border-gray-600 hover:border-gray-400"),children:(0,s.jsx)("video",{src:e.src,className:"w-full h-full object-cover",muted:!0,preload:"metadata"})},e.id))}),!u&&t.length>1&&(0,s.jsx)("div",{className:"flex justify-center gap-2",children:t.map((e,t)=>(0,s.jsx)("button",{onClick:()=>x(t),className:(0,i.cn)("w-2 h-2 rounded-full transition-all",h===t?"bg-primary":"bg-gray-600 hover:bg-gray-400")},t))})]})}}}]);